(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),i=n.n(r),o=(n(12),n(13),n(2)),l=n(1),u=function(e,t){return Object(l.c)(0,e).flatMap((function(e,n){return Object(l.c)(0,t).map((function(e,t){return Object(l.a)([n,t])}))})).toList()},s=function(e){return e.reduce((function(e,t){return e+t}),0)},m=function(e,t){return Object(l.b)(e.map((function(e){return[e,t(e)]})))},f=function(e,t){return Object(l.b)(e.map((function(e){return[e,t]})))},v={active:0,won:1,lost:2},p={0:"\ud83d\ude42",1:"\ud83d\ude0e",2:"\ud83d\ude35"},g=n(6),d=n(5),b=n.n(d);n(14);var E=function(e){var t,n=e.isMine,a=e.mineCount,r=e.isRevealed,i=e.setIsRevealed,o=e.isFlagged,l=e.setIsFlagged,u=e.gameState,s=e.setGameState,m=function(e){e.preventDefault&&e.preventDefault(),u||o||(i(),n&&s(v.lost))},f=function(e){e.preventDefault&&e.preventDefault(),l(!o)},p=!1,d=!1,E={};r||u?(n?t="\ud83d\udca3":(t=a||"",E["m".concat(a)]=!0),u&&(p=o&&n,d=o!==n)):t=o?"\ud83d\udea9":"";var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(e).filter((function(t){return e[t]}));return"".concat(t," ").concat(n.join(" ")).trim()}(Object(g.a)({isRevealed:r,correct:p,incorrect:d,isFlagged:o,isMine:n},E),"cell"),j={width:35,height:35};return c.a.createElement(b.a,{onTap:m,onSwipe:f},c.a.createElement("div",{className:h,style:j,onClick:m,onContextMenu:f,unselectable:"on"},t))},h=function(e,t,n){var a=u(e,t),c=m(a,(function(e){return t=n,Math.random()<t;var t})),r=function(e){return c.get(e)||0},i=m(a,(function(e){return s(M(e,a).map(r))}));return{mineMap:c,countMap:i}},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(u(e,t),n)},M=function(e,t){return function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return[[n-1,a-1],[n,a-1],[n+1,a-1],[n-1,a],[n+1,a],[n-1,a+1],[n,a+1],[n+1,a+1]].map(l.a)}(e).filter((function(e){return t.includes(e)}))},O=function(e,t){return Object(l.d)(e.flatMap((function(e){return M(e,t)})))},w=function(e,t,n){for(var a,c=Object(l.d)([e]),r=Object(l.d)();c.size>0;)a=Object(l.d)(c),c=Object(l.d)(),c=O(a,t).filterNot((function(e){return r.includes(e)})).filter((function(e){return 0===n.get(e)})),r=r.union(c);return r};n(15);var S=function(e){var t=e.width,n=e.height,a=e.mineMap,r=e.countMap,i=e.revealMap,l=e.setRevealMap,s=e.flagMap,m=e.setFlagMap,p=e.gameState,g=e.setGameState,d=u(t,n),b=function(e,t){0===d.filter((function(n){return!(t.get(n)||e.get(n))})).size&&g(v.won)},h=d.map((function(e){return c.a.createElement(E,{isMine:a.get(e),mineCount:r.get(e),isRevealed:i.get(e),setIsRevealed:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(t=t.set(e,!0),0===r.get(e)){var a=w(e,d,r),c=O(a,d),u=a.union(c);t=t.merge(f(u,!0)),n=n.mapEntries((function(e){var t=Object(o.a)(e,2),n=t[0];return[n,t[1]&&!u.has(n)]}))}l(t),m(n),b(t,n)},isFlagged:s.get(e),setIsFlagged:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;n=n.set(e,t),m(n),b(i,n)},gameState:p,setGameState:g,revealMap:i,key:e})})),j={width:35*t,height:35*n};return c.a.createElement("div",{className:"board",style:j},h)};n(16);var k=function(e){var t,n=e.gameState,a=e.minesLeft,r=e.newGameButton,i=p[n];return c.a.createElement("div",{className:"score-container"},c.a.createElement("button",{className:"face",onClick:r},c.a.createElement("span",{role:"img","aria-label":(t=n,Object(l.b)(v).flip().get(t))},i)),c.a.createElement("span",{className:"score"},a," ",c.a.createElement("span",{role:"img","aria-label":"mines left"},"\ud83d\udca3")))};n(17);var N=function(e){var t=Object(a.useState)(9),n=Object(o.a)(t,2),r=n[0],i=n[1],l=Object(a.useState)(v.active),u=Object(o.a)(l,2),m=u[0],f=u[1],p=Object(a.useState)(.1),g=Object(o.a)(p,2),d=g[0],b=g[1],E=r,M=function(){return h(r,E,d)},O=Object(a.useState)(M),w=Object(o.a)(O,2),N=w[0],C=N.mineMap,F=N.countMap,R=w[1],y=function(){return j(r,E)},G=Object(a.useState)(y),I=Object(o.a)(G,2),B=I[0],D=I[1],x=Object(a.useState)(y),z=Object(o.a)(x,2),L=z[0],q=z[1];Object(a.useEffect)((function(){R(h(r,E,d)),D(j(r,E)),q(j(r,E)),f(v.active)}),[r,E,d]);var A=function(e){return Math.round(10*e)/10},J=s(C.valueSeq())-s(L.valueSeq());return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"section"},c.a.createElement(k,{gameState:m,minesLeft:J,newGameButton:function(e){f(v.active),R(M),D(y),q(y)}})),c.a.createElement("div",{className:"section"},c.a.createElement(S,{width:r,height:E,mineMap:C,countMap:F,revealMap:B,setRevealMap:D,flagMap:L,setFlagMap:q,gameState:m,setGameState:f})),c.a.createElement("div",{className:"section controls"},c.a.createElement("strong",null,"Instructions:"),c.a.createElement("p",null,"Reveal: click / tap"),c.a.createElement("p",null,"Flag: right-click / long-tap / swipe")),c.a.createElement("div",{className:"section controls"},c.a.createElement("p",null,c.a.createElement("strong",null,"Alter minefield")," (starts new game):"),c.a.createElement("div",null,"Size: ",c.a.createElement("button",{onClick:function(e){r>1&&i(r-1)}},"-"),r,c.a.createElement("button",{onClick:function(e){i(r+1)}},"+")),c.a.createElement("div",null,"Mine density: ",c.a.createElement("button",{onClick:function(e){b(Math.max(A(d-.1),0))}},"-"),d,c.a.createElement("button",{onClick:function(e){b(Math.min(A(d+.1),1))}},"+"))),c.a.createElement("div",{className:"section controls"},c.a.createElement("p",null,c.a.createElement("span",null,c.a.createElement("a",{href:"https://github.com/tomviner/minesweeper"},"Source")),"|",c.a.createElement("span",null,c.a.createElement("a",{href:"https://twitter.com/tomviner"},"@tomviner")))))};var C=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.399ca8d8.chunk.js.map